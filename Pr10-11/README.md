# –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ 10-11

## –ó–∞–≤–¥–∞–Ω–Ω—è 3

**–û–ø–∏—Å:**
–ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É, —è–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É `fork()` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É. –ü—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–≤–∏–Ω–Ω–∞ –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —á–∏ —î –≤–æ–Ω–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–º —á–∏ –¥–æ—á—ñ—Ä–Ω—ñ–º –ø—Ä–æ—Ü–µ—Å–æ–º.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
–ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–æ–Ω—É—î `fork()`, —â–æ —Å—Ç–≤–æ—Ä—é—î –∫–æ–ø—ñ—é –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É. –Ø–∫—â–æ –≤–∏–∫–ª–∏–∫ —É—Å–ø—ñ—à–Ω–∏–π:

* –£ **–¥–æ—á—ñ—Ä–Ω—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≥—ñ–ª–∫–∞ –∑ `pid == 0`, –¥–µ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è: `"This is the child process"`.
* –£ **–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≥—ñ–ª–∫–∞ –∑ `pid > 0`, –¥–µ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è: `"This is the parent process"`.

–£ –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏ `fork()` –ø–æ–≤–µ—Ä—Ç–∞—î `-1`, —ñ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É.

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task3/main.c)
* ![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è](task3/task3_output.png)

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏ –æ–±–∏–¥–≤–∞ –ø—Ä–æ—Ü–µ—Å–∏ ‚Äî –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π —ñ –¥–æ—á—ñ—Ä–Ω—ñ–π ‚Äî –≤–∏–≤–æ–¥—è—Ç—å —Å–≤–æ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ, –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—á–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –ø—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `fork()`. –ü–æ—Ä—è–¥–æ–∫ –≤–∏–≤–æ–¥—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞ –û–° —ñ –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É.

---

## –ó–∞–≤–¥–∞–Ω–Ω—è 4

**–û–ø–∏—Å:**
–ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É, —è–∫–∞ —Å—Ç–≤–æ—Ä—é—î –¥–≤–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –ø—Ä–∞—Ü—é—é—á—ñ –ø—Ä–æ—Ü–µ—Å–∏ (–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π —Ç–∞ –¥–æ—á—ñ—Ä–Ω—ñ–π), —ñ –∫–æ–∂–µ–Ω –∑ –Ω–∏—Ö —É —Ü–∏–∫–ª—ñ –≤–∏–≤–æ–¥–∏—Ç—å —Å–≤–æ—î —ñ–º‚Äô—è (Parent/Child) —Ç–∞ –Ω–æ–º–µ—Ä —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
–ü—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `fork()` —É—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å. –û–±–∏–¥–≤–∞ –ø—Ä–æ—Ü–µ—Å–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å –æ–∫—Ä–µ–º—ñ —Ü–∏–∫–ª–∏ –∑ `printf()` —Ç–∞ `sleep(1)`, —â–æ –¥–æ–∑–≤–æ–ª—è—î:

* –ü–æ–±–∞—á–∏—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

* –ù–∞–≥–ª—è–¥–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å (—Ä—è–¥–∫–∏ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–º—ñ—à—É–≤–∞—Ç–∏—Å—å –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞ –û–°).

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task4/main.c)

* ![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è](task4/task4_output.png)

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

–ù–∞ –µ–∫—Ä–∞–Ω—ñ –∑‚Äô—è–≤–ª—è—î—Ç—å—Å—è —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤—ñ–¥ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –π –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—ñ–≤:

```
Parent: 0
Child: 0
Parent: 1
Child: 1
...
```

–ü–æ—Ä—è–¥–æ–∫ —Ä—è–¥–∫—ñ–≤ **–º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è** –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ—Ü–µ—Å–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ. –¶–µ —ñ–º—ñ—Ç—É—î —Ä–µ–∞–ª—å–Ω—É –±–∞–≥–∞—Ç–æ–∑–∞–¥–∞—á–Ω—ñ—Å—Ç—å —É —Å–∏—Å—Ç–µ–º—ñ.

---

–û—Å—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è **5.** —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π Markdown-–æ–ø–∏—Å:

---

## –ó–∞–≤–¥–∞–Ω–Ω—è 5

**–û–ø–∏—Å:**
–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–π—Ç–µ, —â–æ –ø—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `fork()` –∑–º—ñ–Ω–Ω—ñ –ø—Ä–æ—Ü–µ—Å—ñ–≤ –Ω–µ —Ä–æ–∑–¥—ñ–ª—è—é—Ç—å—Å—è. –î–æ—á—ñ—Ä–Ω—ñ–π —ñ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –ø—Ä–æ—Ü–µ—Å–∏ –º–∞—é—Ç—å **–≤–ª–∞—Å–Ω—ñ –∫–æ–ø—ñ—ó** –ø–∞–º‚Äô—è—Ç—ñ, —Ç–æ–º—É –∑–º—ñ–Ω–∏ –≤ –æ–¥–Ω–æ–º—É –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —ñ–Ω—à–∏–π.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

* –ó–º—ñ–Ω–Ω–∞ `counter` —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —è–∫ `0` **–¥–æ** –≤–∏–∫–ª–∏–∫—É `fork()`.
* –£ **–¥–æ—á—ñ—Ä–Ω—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ** `counter++`, —Ç–æ–º—É –≤–æ–Ω–∞ —Å—Ç–∞—î `1`.
* –£ **–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ** –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–ª–∏—à–∏–ª–æ—Å—å `0`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –º–∞—î —Å–≤–æ—é –∫–æ–ø—ñ—é `counter`.

–¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –º–µ—Ö–∞–Ω—ñ–∑–º **copy-on-write**: –ø–∞–º‚Äô—è—Ç—å –∫–æ–ø—ñ—é—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, —ñ –∫–æ–∂–µ–Ω –ø—Ä–æ—Ü–µ—Å –ø—Ä–∞—Ü—é—î –∑ –≤–ª–∞—Å–Ω–æ—é –≤–µ—Ä—Å—ñ—î—é –∑–º—ñ–Ω–Ω–æ—ó.

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task5/main.c)
* ![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è](task5/task5_output.png)

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

–í–∏–≤—ñ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:

```
Child: counter = 1
Parent: counter = 0
```

–¶–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î, —â–æ –∑–º—ñ–Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è `counter` –≤ –æ–¥–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ **–Ω–µ –≤–ø–ª–∏–≤–∞—î** –Ω–∞ —ñ–Ω—à–∏–π.

---

## –ó–∞–≤–¥–∞–Ω–Ω—è 6

**–û–ø–∏—Å:**
–ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É, —è–∫–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ñ–∞–π–ª –ø–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º `fork()` —ñ –∑–∞–ø–∏—Å—É—î –≤ –Ω—å–æ–≥–æ –∑ –æ–±–æ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ ‚Äî –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ —Ç–∞ –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —è–∫ –ø–æ–≤–æ–¥–∏—Ç—å—Å—è —Ñ–∞–π–ª–æ–≤–∏–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –ø—ñ—Å–ª—è `fork()`.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

* –§–∞–π–ª `test.txt` –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ **–¥–æ –≤–∏–∫–ª–∏–∫—É fork()**.
* –û–±–∏–¥–≤–∞ –ø—Ä–æ—Ü–µ—Å–∏ **—É—Å–ø–∞–¥–∫–æ–≤—É—é—Ç—å** —Ç–æ–π —Å–∞–º–∏–π —Ñ–∞–π–ª–æ–≤–∏–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä.
* –û—Å–∫—ñ–ª—å–∫–∏ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –≤–∫–∞–∑—É—î –Ω–∞ **–æ–¥–Ω—É –π —Ç—É —Å–∞–º—É –ø–æ–∑–∏—Ü—ñ—é —É —Ñ–∞–π–ª—ñ**, –∑–∞–ø–∏—Å–∏ –º–æ–∂—É—Ç—å *–Ω–∞–∫–ª–∞–¥–∞—Ç–∏—Å—è* –∞–±–æ *–ø–µ—Ä–µ–º—ñ—à—É–≤–∞—Ç–∏—Å—å*, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤.

---

### üè¥‚Äç‚ò†Ô∏è –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–∞–ø–æ—Ä—Ü—ñ–≤ `open()`

```c
open("test.txt", O_CREAT | O_WRONLY | O_TRUNC, 0644);
```

| –ü—Ä–∞–ø–æ—Ä–µ—Ü—å  | –û–ø–∏—Å                                                           |
| ---------- | -------------------------------------------------------------- |
| `O_CREAT`  | –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª, —è–∫—â–æ –≤—ñ–Ω –Ω–µ —ñ—Å–Ω—É—î.                              |
| `O_WRONLY` | –í—ñ–¥–∫—Ä–∏–≤–∞—î —Ñ–∞–π–ª –ª–∏—à–µ –¥–ª—è –∑–∞–ø–∏—Å—É.                                |
| `O_TRUNC`  | –Ø–∫—â–æ —Ñ–∞–π–ª –≤–∂–µ —ñ—Å–Ω—É—î ‚Äî **–æ—á–∏—â–∞—î –π–æ–≥–æ** (–æ–±—Ä—ñ–∑–∞—î –¥–æ –Ω—É–ª—è).       |
| `0644`     | –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É: –≤–ª–∞—Å–Ω–∏–∫ –º–æ–∂–µ —á–∏—Ç–∞—Ç–∏/–ø–∏—Å–∞—Ç–∏; —ñ–Ω—à—ñ ‚Äî –ª–∏—à–µ —á–∏—Ç–∞—Ç–∏. |

> ‚ú≥Ô∏è –£–≤–∞–≥–∞: —è–∫—â–æ `fork()` —Å—Ç–≤–æ—Ä—é—î –∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤, —è–∫—ñ –∑–∞–ø–∏—Å—É—é—Ç—å —É —Ç–æ–π —Å–∞–º–∏–π —Ñ–∞–π–ª, –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó, –≤–∏–Ω–∏–∫–∞—î **–∑–º–∞–≥–∞–Ω–Ω—è –∑–∞ —Ä–µ—Å—É—Ä—Å–∏** ‚Äî race condition.

---

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task6/main.c)
* ![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è](task6/task6_output.png)

---

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

–§–∞–π–ª `test.txt` –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏:

```
Parent
Child
```

–∞–±–æ

```
Child
Parent
```

–∞–±–æ –Ω–∞–≤—ñ—Ç—å –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π –∑–º—ñ—à–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –Ω–∞ –∑—Ä–∞–∑–æ–∫:

```
ParChildent
```

–í—Å–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫–∏–π –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä—à–∏–º –æ—Ç—Ä–∏–º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –∑–∞–ø–∏—Å—É. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —â–æ **–ø–æ–∑–∏—Ü—ñ—è —É —Ñ–∞–π–ª—ñ —Å–ø—ñ–ª—å–Ω–∞**, —ñ –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É –≤ –±–∞–≥–∞—Ç–æ–ø—Ä–æ—Ü–µ—Å–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–∞—Ö –ø–æ—Ç—Ä—ñ–±–Ω–∞ **—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `flock()`, `mutex`, –∞–±–æ –æ–∫—Ä–µ–º–∏—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤)**.

---

## –ó–∞–≤–¥–∞–Ω–Ω—è 7-8

**–û–ø–∏—Å:**
–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à—É –∫–æ–º–∞–Ω–¥–Ω—É –æ–±–æ–ª–æ–Ω–∫—É ‚Äî *DumbSH*, —è–∫–∞ –∑—á–∏—Ç—É—î –∫–æ–º–∞–Ω–¥–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ—Ü–µ—Å —á–µ—Ä–µ–∑ `fork()`, –≤–∏–∫–æ–Ω—É—î –∫–æ–º–∞–Ω–¥—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `execlp()` —ñ –æ—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `wait()`.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ `dumbsh>`.
2. –ü—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–ª–∏–∫–∞—î `fork()` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É.
3. –î–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å –≤–∏–∫–æ–Ω—É—î –≤–≤–µ–¥–µ–Ω—É –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ `execlp()`.
4. –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –ø—Ä–æ—Ü–µ—Å –æ—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ.
5. –ö–æ–º–∞–Ω–¥–∞ `exit` –∑–∞–≤–µ—Ä—à—É—î –æ–±–æ–ª–æ–Ω–∫—É.

---

### ‚öôÔ∏è –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:

* `fgets()` –∑—á–∏—Ç—É—î —Ä—è–¥–æ–∫ –∑ `stdin`.
* `strcspn(line, "\n")` ‚Äî –ø—Ä–∏–±–∏—Ä–∞—î `\n` —ñ–∑ –∫—ñ–Ω—Ü—è —Ä—è–¥–∫–∞, —ñ–Ω–∞–∫—à–µ `execlp()` –Ω–µ –∑–Ω–∞–π–¥–µ –∫–æ–º–∞–Ω–¥—É.
* `execlp()` —à—É–∫–∞—î –∫–æ–º–∞–Ω–¥—É –≤ \$PATH.
* `wait(NULL)` –∑–∞–ø–æ–±—ñ–≥–∞—î –ø–æ—è–≤—ñ –∑–æ–º–±—ñ-–ø—Ä–æ—Ü–µ—Å—ñ–≤.

---

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task7/main.c)
* ![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è DumbSH](task7/dumbsh_prompt.png)

---

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

gcc dumbsh.c -o dumbsh
./dumbsh
dumbsh> ls
dumbsh> whoami
dumbsh> exit


–ü—Ä–æ–≥—Ä–∞–º–∞ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –∫–æ–º–∞–Ω–¥–∏, —è–∫ —É –∑–≤–∏—á–∞–π–Ω—ñ–π shell. –í–æ–Ω–∞ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –¥–æ –∫–æ–º–∞–Ω–¥ –∞–±–æ –∫–æ–Ω–≤–µ—î—Ä–∏ (`|`), –∞–ª–µ –¥–æ–±—Ä–µ —ñ–ª—é—Å—Ç—Ä—É—î –±–∞–∑–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ –æ–±–æ–ª–æ–Ω–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ `fork()` —Ç–∞ `exec()`.


---

## –ó–∞–≤–¥–∞–Ω–Ω—è 9

**–û–ø–∏—Å:**
–î–æ—Å–ª—ñ–¥—ñ—Ç—å —Ä–æ–±–æ—Ç—É —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É `wait()` —Ç–∞ –º–∞–∫—Ä–æ—Å—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É. –ü—Ä–æ–≥—Ä–∞–º–∞ —Å—Ç–≤–æ—Ä—é—î –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å, —è–∫–∏–π –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –∑ –ø–µ–≤–Ω–∏–º –∫–æ–¥–æ–º, –∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π —á–µ–∫–∞—î –Ω–∞ –Ω—å–æ–≥–æ —ñ –æ–±—Ä–æ–±–ª—è—î —Å—Ç–∞—Ç—É—Å.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

* –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å —á–µ—Ä–µ–∑ `fork()`.
* –î–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å –≤–∏–∫–æ–Ω—É—î `sleep()` —ñ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –∑ –∫–æ–¥–æ–º `42`.
* –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î `wait(&status)`.
* –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `WIFEXITED(status)` –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è, —á–∏ –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –ø—Ä–æ—Ü–µ—Å –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
* `WEXITSTATUS(status)` –≤–∏—Ç—è–≥—É—î –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.

---

### ‚öôÔ∏è –ö–ª—é—á–æ–≤—ñ API-–º–∞–∫—Ä–æ—Å–∏:

* `wait(&status)` ‚Äî –æ—á—ñ–∫—É—î –±—É–¥—å-—è–∫–∏–π –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å.
* `waitpid(pid, &status, 0)` ‚Äî –æ—á—ñ–∫—É—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å–∞ –∑–∞ PID.
* `waitpid(pid, &status, WNOHANG)` ‚Äî **–Ω–µ –±–ª–æ–∫—É—î**, —è–∫—â–æ –¥–æ—á—ñ—Ä–Ω—ñ–π —â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–≤—Å—è.
* `WIFEXITED(status)` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
* `WEXITSTATUS(status)` ‚Äî –æ—Ç—Ä–∏–º—É—î –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è, —è–∫—â–æ –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

---

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task9/main.c)
* ![–†–µ–∑—É–ª—å—Ç–∞—Ç](task9/output.png)

---

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏:

```
Child is running...
Child exited with code 42
```

–¶–µ –ø–æ–∫–∞–∑—É—î, —è–∫ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤ —É –±–∞–≥–∞—Ç–æ–ø—Ä–æ—Ü–µ—Å–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–∞—Ö, —â–æ–± —É–Ω–∏–∫–∞—Ç–∏ –∑–æ–º–±—ñ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—ñ—Ö –∑–∞–¥–∞—á.


---

## –ó–∞–≤–¥–∞–Ω–Ω—è 10-11

**–û–ø–∏—Å:**

* **Fork Bomb** ‚Äî —Ü–µ —à–∫—ñ–¥–ª–∏–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è, —â–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø–æ—Ä–æ–¥–∂—É—î –±–µ–∑–ª—ñ—á –ø—Ä–æ—Ü–µ—Å—ñ–≤ —ñ —à–≤–∏–¥–∫–æ –≤–∏—á–µ—Ä–ø—É—î —Ä–µ—Å—É—Ä—Å–∏ —Å–∏—Å—Ç–µ–º–∏.
  –ü—Ä–∏–∫–ª–∞–¥ (–Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏!):

  ```bash
  :(){ :|:& };:
  ```
* –ü—Ä–æ–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –±–µ–∑–ø–µ—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –¥–æ—á—ñ—Ä–Ω—ñ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ —É —Ü–∏–∫–ª—ñ —á–µ—Ä–µ–∑ `fork()`, –∫–æ–∂–µ–Ω —ñ–∑ —è–∫–∏—Ö –≤–∏–≤–æ–¥–∏—Ç—å —Å–≤—ñ–π —ñ–Ω–¥–µ–∫—Å —ñ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è.
* –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –ø—Ä–æ—Ü–µ—Å –æ—á—ñ–∫—É—î –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ—Ç–µ–π —á–µ—Ä–µ–∑ —Ü–∏–∫–ª –∑ `wait()`.

---

### ‚öôÔ∏è –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:

* –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –¥–æ—á—ñ—Ä–Ω—ñ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ –æ–±–º–µ–∂–µ–Ω–∞ (`i < 3`).
* –ö–æ–∂–µ–Ω –¥–∏—Ç—è—á–∏–π –ø—Ä–æ—Ü–µ—Å –≤–∏–≤–æ–¥–∏—Ç—å —Å–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è.
* –¶–∏–∫–ª `while (wait(NULL) > 0);` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –±–∞—Ç—å–∫–æ –¥–æ—á–µ–∫–∞—î—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ—Ç–µ–π, —É–Ω–∏–∫–∞—é—á–∏ –∑–æ–º–±—ñ.

---

* [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task10/main.c)
* ![–î—ñ–∞–≥—Ä–∞–º–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤](task10/fork_children.png)

---

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏:

```
Child 0
Child 1
Child 2
```

–ü—Ä–æ–≥—Ä–∞–º–∞ —Å—Ç–≤–æ—Ä—é—î —Ç—Ä–∏ –¥–æ—á—ñ—Ä–Ω—ñ –ø—Ä–æ—Ü–µ—Å–∏, –∫–æ–∂–µ–Ω –≤–∏–≤–æ–¥–∏—Ç—å —Å–≤—ñ–π –Ω–æ–º–µ—Ä, –∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π —á–µ–∫–∞—î, –¥–æ–∫–∏ –≤—Å—ñ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å–∞–º–∏ –±–µ–∑ —Ä–∏–∑–∏–∫—É –≤–∏—á–µ—Ä–ø–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, –Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ fork bomb.

wait(NULL); // –±—É–¥—å-—è–∫–∏–π –¥–æ—á—ñ—Ä–Ω—ñ–π
waitpid(-1, &status, 0); // –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç wait
waitpid(pid, &status, 0); // –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø—Ä–æ—Ü–µ—Å
waitpid(pid, &status, WNOHANG); // –Ω–µ –±–ª–æ–∫—É—î


---

## –ó–∞–≤–¥–∞–Ω–Ω—è 14

### –û–ø–∏—Å

–í–∞—Ä—ñ–∞–Ω—Ç 14
–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –¥–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏: –æ–¥–Ω–∞ (message) –ø—Ä–æ—Å—Ç–æ –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —ñ–Ω—à–∞ (main) —Å—Ç–≤–æ—Ä—é—î –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é fork(), –∞ –ø–æ—Ç—ñ–º —É –¥–æ—á—ñ—Ä–Ω—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ –≤–∏–∫–ª–∏–∫–∞—î message —á–µ—Ä–µ–∑ exec(). –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –ø—Ä–æ—Ü–µ—Å —á–µ–∫–∞—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ —Ü–µ.

### –Ø–∫ –ø—Ä–∞—Ü—é—î

–ü—Ä–æ–≥—Ä–∞–º–∞ main.c —Å–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–ª–∏–∫–∞—î fork(). –£ –¥–æ—á—ñ—Ä–Ω—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é execl() –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ message, —è–∫–∞ –≤–∏–≤–æ–¥–∏—Ç—å "Hello world!". –Ø–∫—â–æ exec –Ω–µ –≤–¥–∞—î—Ç—å—Å—è - –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É. –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –ø—Ä–æ—Ü–µ—Å —á–µ–∫–∞—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ —á–µ—Ä–µ–∑ wait() —ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—î, —â–æ –¥–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à–∏–≤—Å—è. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É —Ç–∞ –∑–∞–º—ñ–Ω–∞ –π–æ–≥–æ –∫–æ–¥—É –Ω–∞ —ñ–Ω—à—É –ø—Ä–æ–≥—Ä–∞–º—É.

### [–ö–æ–¥ –¥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è](task14/message.c)
### [–ö–æ–¥ –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è](task14/main.c)

![–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è](task14/task1.png)

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏

–ù–∞ –µ–∫—Ä–∞–Ω—ñ —Å–ø–æ—á–∞—Ç–∫—É –∑'—è–≤–ª—è—î—Ç—å—Å—è "Hello world!" (–≤—ñ–¥ message), –∞ –ø–æ—Ç—ñ–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–î–æ—á—ñ—Ä–Ω—ñ–π –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à–∏–≤—Å—è." (–≤—ñ–¥ main).

